+++
pre = "<b>5. </b>"
title = "事务"
weight = 5
chapter = true
+++

## 背景

Sharding-JDBC由于性能方面的考量，决定不支持强一致性分布式事务。我们已明确规划线路图，未来会支持最终一致性的柔性事务。

目前最大努力送达型柔性事务已开发完成。

如果不使用柔性事务，也会自动包含弱XA事务支持，有以下几点说明：

* 完全支持非跨库事务，例如：仅分表，或分库但是路由的结果在单库中。

* 完全支持因逻辑异常导致的跨库事务。例如：同一事务中，跨两个库更新。更新完毕后，抛出空指针，则两个库的内容都能回滚。

* 不支持因网络、硬件异常导致的跨库事务。例如：同一事务中，跨两个库更新，更新完毕后、未提交之前，第一个库死机，则只有第二个库数据提交。

